"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var TemplateTranspiler={Functions:{}};TemplateTranspiler.UID=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"generate",value:function(){var e=function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",n=0;n<5;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e};return e()+e()+"_"+e()+"_"+e()+"_"+e()+"_"+e()+e()+e()}}]),e}(),TemplateTranspiler.Parser=function(){function e(){_classCallCheck(this,e),this._domParser=new DOMParser,this._random_name=TemplateTranspiler.UID.generate(),this._tag_count=0,this.TemplateInstanceList=[]}return _createClass(e,[{key:"TranspileNode",value:function(e,t){var n="a_"+this._random_name+"_"+this._tag_count++,r="";if("#comment"==e.nodeName)return r;if("#text"==e.nodeName)return""==e.data.replace(/[\r\n]+/g," ").trim()?"":(r+="var "+n+" = document.createElement('SPAN');",r+=n+".innerHTML += '"+e.data.replace(/[\r\n]+/g," ")+"';",r+=t+".appendChild("+n+");");r+="var "+n+" = document.createElement('"+e.tagName.toUpperCase()+"');";for(var a=e.attributes.length,i=0;i<a;i++)r+=n+".setAttribute('"+e.attributes[i].name+"', '"+e.attributes[i].value+"');";if(0<e.childNodes.length)for(var s=e.childNodes.length,l=0;l<s;l++)r+=this.TranspileNode(e.childNodes[l],n);else r+=n+".textContent = '"+e.innerHTML.replace(/[\r\n]+/g," ")+"';";return e.hasAttribute("eid")?(r+=t+".appendChild("+n+");",r+="childObjects."+e.getAttribute("eid")+" = "+n+";"):r+=t+".appendChild("+n+");",r}},{key:"Parse",value:function(e){this.TemplateInstanceList=[];for(var t=this._domParser.parseFromString(e,"text/html"),n="",r=t.body.childNodes.length,a=0;a<r;a++)n+=this.TranspileNode(t.body.childNodes[a],"target");return n}},{key:"GenerateDrawerFuction",value:function(e,t){var n=this.Parse(t),r="\n            TemplateTranspiler.Functions.".concat(e," = function(target){\n                return new Promise(function(resolve, reject){ \n                    var childObjects = {};\n                    ").concat(n,"\n                    resolve(childObjects); \n                });\n            };\n        "),a=document.createElement("SCRIPT");a.innerHTML=r,document.head.appendChild(a)}}]),e}();